<IfModule mod_rewrite.c>
    RewriteEngine On

    # Automatically detect and set RewriteBase
    RewriteBase /

    # If this is running in a subfolder, auto-adjust RewriteBase
    RewriteCond %{REQUEST_URI} !^/$
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

# Security: Block access to hidden files and sensitive folders
<FilesMatch "^(.*)\.(env|log|htaccess|git|md)$">
    Order allow,deny
    Deny from all
</FilesMatch>
